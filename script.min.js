const DOGS = [{
    id: "aika",
    name: "Айка",
    breed: "Сибирская лайка",
    sex: "девочка",
    ageMonths: 8,
    ageGroup: "young",
    energy: "high",
    status: "available",
    short: "Активная, ориентирована на человека. Любит прогулки и игры.",
    details: ["Вакцинации по возрасту, ветпаспорт", "Дружит с людьми и собаками", "Подходит активной семье", "Знает базовые команды: «ко мне», «сидеть»"]
}, {
    id: "bruno",
    name: "Бруно",
    breed: "Лабрадор ретривер",
    sex: "мальчик",
    ageMonths: 14,
    ageGroup: "young",
    energy: "medium",
    status: "available",
    short: "Добрый компаньон, любит детей, спокойно остаётся дома.",
    details: ["Вакцинации, обработка от паразитов", "Обучен поводку, не тянет", "Подходит для квартиры/дома", "Хорошо ладит с детьми"]
}, {
    id: "luna",
    name: "Луна",
    breed: "Самоед",
    sex: "девочка",
    ageMonths: 6,
    ageGroup: "puppy",
    energy: "high",
    status: "available",
    short: "Щенок с отличной социализацией. Очень контактная и умная.",
    details: ["Щенячья метрика, ветпаспорт", "Социализация и адаптация к городу", "Рекомендуем занятия с кинологом", "Любит внимание и игры"]
}, {
    id: "thor",
    name: "Тор",
    breed: "Немецкая овчарка",
    sex: "мальчик",
    ageMonths: 30,
    ageGroup: "adult",
    energy: "high",
    status: "available",
    short: "Сильный, обучаемый, отличный для спорта и охраны территории.",
    details: ["Базовый ОКД, отличный контакт", "Требует уверенного владельца", "Лучше в дом с участком", "Регулярные тренировки обязательны"]
}, {
    id: "marta",
    name: "Марта",
    breed: "Корги пемброк",
    sex: "девочка",
    ageMonths: 20,
    ageGroup: "adult",
    energy: "medium",
    status: "available",
    short: "Уравновешенная, ласковая, легко обучается. Отличный компаньон.",
    details: ["Привита, ветпаспорт", "Дружелюбная к гостям", "Любит короткие активные игры", "Подходит для квартиры"]
}, {
    id: "snow",
    name: "Сноу",
    breed: "Хаски",
    sex: "мальчик",
    ageMonths: 10,
    ageGroup: "young",
    energy: "high",
    status: "reserved",
    short: "Очень энергичный. Для людей, которые любят долгие прогулки.",
    details: ["Рекомендуем шлейку и беговые занятия", "Нужна нагрузка и дисциплина", "Любит общение", "Статус: бронь"]
}]
  , ENERGY_LABEL = {
    low: "низкая активность",
    medium: "средняя активность",
    high: "высокая активность"
}
  , AGE_GROUP_LABEL = {
    puppy: "щенок",
    young: "юниор",
    adult: "взрослый"
}
  , STATUS_LABEL = {
    available: "доступен",
    reserved: "бронь"
}
  , IMAGE_FILES = ["images/1.jpg", "images/2.jpg", "images/3.jpg", "images/4.jpg", "images/5.jpg", "images/6.jpg", "images/7.jpg", "images/8.jpg"];
function getDogImageSrc(e, t) {
    const a = IMAGE_FILES.find(t => t.endsWith(`/${e.id}.jpg`) || t.endsWith(`/${e.id}.png`));
    return a || ("number" == typeof t && IMAGE_FILES.length ? IMAGE_FILES[t % IMAGE_FILES.length] : null)
}
function $(e, t=document) {
    return t.querySelector(e)
}
function $$(e, t=document) {
    return Array.from(t.querySelectorAll(e))
}
function clamp(e, t, a) {
    return Math.min(a, Math.max(t, e))
}
function ageText(e) {
    if (e < 12)
        return `${e} мес.`;
    const t = Math.floor(e / 12)
      , a = e % 12;
    return 0 === a ? `${t} г.` : `${t} г. ${a} мес.`
}
function escapeHtml(e) {
    return String(e).replaceAll("&", "&amp;").replaceAll("<", "&lt;").replaceAll(">", "&gt;").replaceAll('"', "&quot;").replaceAll("'", "&#039;")
}
function getFavs() {
    try {
        const e = localStorage.getItem("kennel_favs")
          , t = e ? JSON.parse(e) : [];
        return Array.isArray(t) ? t : []
    } catch {
        return []
    }
}
function setFavs(e) {
    localStorage.setItem("kennel_favs", JSON.stringify(e))
}
function isFav(e) {
    return getFavs().includes(e)
}
function toggleFav(e) {
    const t = getFavs()
      , a = t.indexOf(e);
    return a >= 0 ? t.splice(a, 1) : t.push(e),
    setFavs(t),
    t
}
function setYear() {
    const e = $("#year");
    e && (e.textContent = (new Date).getFullYear())
}
function dogSvg(e) {
    const t = escapeHtml(e);
    return `\n  <svg viewBox="0 0 600 360" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Фото ${t}">\n    <defs>\n      <linearGradient id="g" x1="0" x2="1" y1="0" y2="1">\n        <stop offset="0" stop-color="rgba(37,99,235,.35)"/>\n        <stop offset="1" stop-color="rgba(22,163,74,.30)"/>\n      </linearGradient>\n    </defs>\n    <rect x="10" y="10" width="580" height="340" rx="26" fill="rgba(255,255,255,.55)" stroke="rgba(15,23,42,.12)"/>\n    <circle cx="220" cy="165" r="78" fill="url(#g)" opacity=".85"/>\n    <circle cx="365" cy="165" r="78" fill="url(#g)" opacity=".55"/>\n    <path d="M210 210c18 16 46 16 64 0" fill="none" stroke="rgba(15,23,42,.55)" stroke-width="10" stroke-linecap="round"/>\n    <path d="M350 210c18 16 46 16 64 0" fill="none" stroke="rgba(15,23,42,.55)" stroke-width="10" stroke-linecap="round"/>\n    <circle cx="250" cy="150" r="8" fill="rgba(15,23,42,.65)"/>\n    <circle cx="390" cy="150" r="8" fill="rgba(15,23,42,.65)"/>\n    <text x="50%" y="310" text-anchor="middle"\n      font-family="Inter, Arial" font-size="36" font-weight="800" fill="rgba(15,23,42,.75)">${t}</text>\n  </svg>`
}
let lastFocus = null;
function openModal(e, t=null) {
    const a = $("#modalOverlay")
      , n = $("#modalContent");
    if (!a || !n)
        return;
    lastFocus = document.activeElement,
    n.innerHTML = renderModal(e, t),
    attachImageFallbacks(n),
    a.setAttribute("aria-hidden", "false"),
    document.body.style.overflow = "hidden";
    const s = getFocusableElements(a);
    s.length && s[0].focus(),
    a.addEventListener("click", overlayClickClose),
    document.addEventListener("keydown", escClose),
    document.addEventListener("keydown", trapFocus),
    bindModalLogic(e, t)
}
function closeModal() {
    const e = $("#modalOverlay");
    if (!e)
        return;
    e.setAttribute("aria-hidden", "true"),
    document.body.style.overflow = "",
    e.removeEventListener("click", overlayClickClose),
    document.removeEventListener("keydown", escClose),
    document.removeEventListener("keydown", trapFocus);
    const t = $("#modalContent");
    t && (t.innerHTML = ""),
    lastFocus && "function" == typeof lastFocus.focus && lastFocus.focus()
}
function overlayClickClose(e) {
    e.target.closest("[data-close-modal]") && closeModal()
}
function escClose(e) {
    "Escape" === e.key && closeModal()
}
function getFocusableElements(e) {
    return $$('a[href], button:not([disabled]), textarea, input, select, [tabindex]:not([tabindex="-1"])', e).filter(e => !e.hasAttribute("hidden") && null !== e.offsetParent)
}
function trapFocus(e) {
    if ("Tab" !== e.key)
        return;
    const t = $("#modalOverlay");
    if (!t || "true" === t.getAttribute("aria-hidden"))
        return;
    const a = getFocusableElements(t);
    if (!a.length)
        return;
    const n = a[0]
      , s = a[a.length - 1];
    e.shiftKey && document.activeElement === n ? (e.preventDefault(),
    s.focus()) : e.shiftKey || document.activeElement !== s || (e.preventDefault(),
    n.focus())
}
function renderModal(e, t) {
    if ("dog" === e && t) {
        const e = t
          , a = DOGS.findIndex(t => t.id === e.id)
          , n = getDogImageSrc(e, a)
          , s = n ? `<img src="${escapeHtml(n)}" alt="Фото ${escapeHtml(e.name)}" loading="lazy">` : dogSvg(e.name)
          , l = `\n      <span class="tag">${AGE_GROUP_LABEL[e.ageGroup]}</span>\n      <span class="tag tag--amber">${ENERGY_LABEL[e.energy]}</span>\n      <span class="tag tag--green">${STATUS_LABEL[e.status]}</span>\n    `;
        return `\n      <h2 class="modal__title" id="modalTitle">${escapeHtml(e.name)} — подробнее</h2>\n      <div class="modal__grid">\n        <div class="modal__img">${s}</div>\n        <div>\n          <div class="card__meta" style="margin-bottom:10px">${l}</div>\n          <p class="muted" style="margin:0 0 10px">\n            <strong>${escapeHtml(e.breed)}</strong>, ${escapeHtml(e.sex)}, возраст: <strong>${ageText(e.ageMonths)}</strong>.\n          </p>\n          <p class="muted" style="margin:0 0 12px">${escapeHtml(e.short)}</p>\n          <ul class="modal__list">\n            ${e.details.map(e => `<li>${escapeHtml(e)}</li>`).join("")}\n          </ul>\n\n          <div class="modal__actions">\n            <button class="btn btn--primary" data-action="book-dog" ${"available" !== e.status ? "disabled" : ""}>\n              Записаться на знакомство\n            </button>\n            <button class="btn btn--ghost" data-action="toggle-fav">\n              ${isFav(e.id) ? "Убрать из избранного" : "В избранное"}\n            </button>\n          </div>\n\n          ${"available" !== e.status ? '<div class="helper" style="margin-top:10px">Сейчас на собаку оформлена бронь. Можно оставить заявку на ожидание.</div>' : '<div class="helper" style="margin-top:10px">Нажми «Записаться» — мы уточним детали и предложим время.</div>'}\n        </div>\n      </div>\n    `
    }
    if ("contact" === e)
        return '\n      <h2 class="modal__title" id="modalTitle">Контакты</h2>\n      <p class="muted" style="margin-top:0">\n        Напишите нам — ответим в течение дня.\n      </p>\n\n      <div class="panel" style="padding:14px; box-shadow:none">\n        <div class="contact-mini">\n          <div class="contact-mini__item">\n            <span class="contact-mini__label">Телефон</span>\n            <a class="contact-mini__value" href="tel:+79990000000">+7 (999) 000-00-00</a>\n          </div>\n          <div class="contact-mini__item">\n            <span class="contact-mini__label">Почта</span>\n            <a class="contact-mini__value" href="mailto:info@severnaya-lapa.ru">info@severnaya-lapa.ru</a>\n          </div>\n          <div class="contact-mini__item">\n            <span class="contact-mini__label">Адрес</span>\n            <span class="contact-mini__value">Москва, (условный адрес), по записи</span>\n          </div>\n        </div>\n      </div>\n\n      <div style="height:12px"></div>\n\n      <form class="form" id="contactForm" novalidate>\n        <div class="form__row">\n          <div class="field">\n            <label class="label" for="cName">Имя</label>\n            <input class="input" id="cName" name="name" placeholder="Ваше имя" required />\n            <div class="error" data-error-for="cName" hidden>Введите имя</div>\n          </div>\n          <div class="field">\n            <label class="label" for="cPhone">Телефон</label>\n            <input class="input" id="cPhone" name="phone" placeholder="+7 (___) ___-__-__" required />\n            <div class="error" data-error-for="cPhone" hidden>Введите телефон</div>\n          </div>\n        </div>\n\n        <div class="field">\n          <label class="label" for="cMsg">Сообщение</label>\n          <textarea class="textarea" id="cMsg" name="msg" rows="4" placeholder="Например: хочу спокойного компаньона в квартиру" required></textarea>\n          <div class="error" data-error-for="cMsg" hidden>Напишите сообщение</div>\n        </div>\n\n        <button class="btn btn--primary btn--block" type="submit">Отправить</button>\n        <div class="helper">Это демо-форма: данные не уходят на сервер, но логика работает.</div>\n      </form>\n    ';
    if ("booking" === e)
        return '\n      <h2 class="modal__title" id="modalTitle">Заявка на подбор / знакомство</h2>\n      <p class="muted" style="margin-top:0">\n        Оставьте контакты и коротко опишите условия — мы предложим подходящих собак и время встречи.\n      </p>\n\n      <form class="form" id="bookingForm" novalidate>\n        <div class="form__row">\n          <div class="field">\n            <label class="label" for="bName">Имя</label>\n            <input class="input" id="bName" name="name" placeholder="Ваше имя" required />\n            <div class="error" data-error-for="bName" hidden>Введите имя</div>\n          </div>\n          <div class="field">\n            <label class="label" for="bPhone">Телефон</label>\n            <input class="input" id="bPhone" name="phone" placeholder="+7 (___) ___-__-__" required />\n            <div class="error" data-error-for="bPhone" hidden>Введите телефон</div>\n          </div>\n        </div>\n\n        <div class="form__row">\n          <div class="field">\n            <label class="label" for="bCity">Город</label>\n            <input class="input" id="bCity" name="city" placeholder="Москва" required />\n            <div class="error" data-error-for="bCity" hidden>Укажите город</div>\n          </div>\n          <div class="field">\n            <label class="label" for="bType">Что нужно?</label>\n            <select class="select" id="bType" name="type" required>\n              <option value="">Выберите</option>\n              <option value="meet">Знакомство с конкретной собакой</option>\n              <option value="pick">Подбор по анкете</option>\n            </select>\n            <div class="error" data-error-for="bType" hidden>Выберите вариант</div>\n          </div>\n        </div>\n\n        <div class="field">\n          <label class="label" for="bMsg">Комментарий</label>\n          <textarea class="textarea" id="bMsg" name="msg" rows="4"\n            placeholder="Условия (квартира/дом), опыт, график, есть ли дети/животные, желаемый характер"></textarea>\n          <div class="helper">Чем подробнее — тем точнее подбор.</div>\n        </div>\n\n        <button class="btn btn--primary btn--block" type="submit">Отправить заявку</button>\n        <div class="helper">Демо: показывает уведомление, без отправки на сервер.</div>\n      </form>\n    ';
    if ("favorites" === e) {
        const e = getFavs()
          , t = DOGS.filter(t => e.includes(t.id));
        return `\n      <h2 class="modal__title" id="modalTitle">Избранное</h2>\n      ${t.length ? `\n        <p class="muted" style="margin-top:0">Нажмите на карточку, чтобы открыть подробнее.</p>\n        <div class="cards-grid" style="grid-template-columns: repeat(2, 1fr)">\n          ${t.map(e => renderCardHtml(e, DOGS.findIndex(t => t.id === e.id))).join("")}\n        </div>\n      ` : '\n        <p class="muted" style="margin-top:0">Пока пусто. Добавляйте собак в избранное в каталоге.</p>\n        <button class="btn btn--primary" data-close-modal>Понятно</button>\n      '}\n    `
    }
    return '<h2 class="modal__title" id="modalTitle">Окно</h2><p class="muted">Контент не найден.</p>'
}
function bindModalLogic(e, t) {
    const a = $("#modalContent");
    if (a) {
        if ("dog" === e && t && a.addEventListener("click", e => {
            const a = e.target.closest('[data-action="book-dog"]')
              , n = e.target.closest('[data-action="toggle-fav"]');
            if (a && (closeModal(),
            openModal("booking"),
            showToast(`Заявка на знакомство: ${t.name}`)),
            n) {
                const e = toggleFav(t.id);
                updateFavCount(),
                n.textContent = isFav(t.id) ? "Убрать из избранного" : "В избранное",
                showToast(isFav(t.id) ? "Добавлено в избранное" : "Удалено из избранного"),
                syncFavIcons(e)
            }
        }
        , {
            once: !0
        }),
        "favorites" === e && a.addEventListener("click", e => {
            const t = e.target.closest("[data-dog-id]");
            if (!t)
                return;
            const a = t.getAttribute("data-dog-id")
              , n = DOGS.find(e => e.id === a);
            n && openModal("dog", n)
        }
        ),
        "contact" === e) {
            const e = $("#contactForm");
            e && e.addEventListener("submit", t => {
                t.preventDefault();
                validateForm(e) && (e.reset(),
                closeModal(),
                showToast("Сообщение отправлено ✅"))
            }
            )
        }
        if ("booking" === e) {
            const e = $("#bookingForm");
            e && e.addEventListener("submit", t => {
                t.preventDefault();
                validateForm(e) && (e.reset(),
                closeModal(),
                showToast("Заявка отправлена ✅"))
            }
            )
        }
    }
}
let toastTimer = null;
function showToast(e) {
    const t = $("#toast");
    t && (t.textContent = e,
    t.hidden = !1,
    clearTimeout(toastTimer),
    toastTimer = setTimeout( () => {
        t.hidden = !0
    }
    , 2400))
}
function validateForm(e) {
    let t = !0;
    return $$("[required]", e).forEach(a => {
        const n = a.id
          , s = e.querySelector(`[data-error-for="${CSS.escape(n)}"]`)
          , l = (a.value || "").trim();
        let i = !0;
        if (l || (i = !1),
        i && "phone" === a.name) {
            i = l.replace(/\D/g, "").length >= 10
        }
        i && "SELECT" === a.tagName && (i = "" !== l),
        i ? (s && (s.hidden = !0),
        a.removeAttribute("aria-invalid")) : (t = !1,
        s && (s.hidden = !1),
        a.setAttribute("aria-invalid", "true"))
    }
    ),
    t || showToast("Проверьте поля формы"),
    t
}
function energyTag(e) {
    return "low" === e ? `<span class="tag tag--green">${ENERGY_LABEL[e]}</span>` : "high" === e ? `<span class="tag tag--amber">${ENERGY_LABEL[e]}</span>` : `<span class="tag">${ENERGY_LABEL[e]}</span>`
}
function statusTag(e) {
    return "available" === e ? `<span class="tag tag--green">${STATUS_LABEL[e]}</span>` : `<span class="tag tag--amber">${STATUS_LABEL[e]}</span>`
}
function renderCardHtml(e, t) {
    const a = isFav(e.id)
      , n = getDogImageSrc(e, t)
      , s = n ? `<img src="${escapeHtml(n)}" alt="Фото ${escapeHtml(e.name)}" loading="lazy">` : dogSvg(e.name);
    return `\n    <article class="card" data-dog-id="${escapeHtml(e.id)}" tabindex="0" aria-label="Карточка: ${escapeHtml(e.name)}">\n      <div class="card__img">${s}</div>\n      <div class="card__body">\n        <div class="card__top">\n          <div>\n            <h3 class="card__name">${escapeHtml(e.name)}</h3>\n            <p class="card__breed">${escapeHtml(e.breed)} • ${escapeHtml(e.sex)} • ${ageText(e.ageMonths)}</p>\n          </div>\n        </div>\n\n        <div class="card__meta">\n          <span class="tag">${AGE_GROUP_LABEL[e.ageGroup]}</span>\n          ${energyTag(e.energy)}\n          ${statusTag(e.status)}\n        </div>\n\n        <p class="card__desc">${escapeHtml(e.short)}</p>\n\n        <div class="card__actions">\n          <button class="btn btn--primary" data-open-dog="${escapeHtml(e.id)}" ${"available" !== e.status ? "disabled" : ""}>\n            Подробнее\n          </button>\n\n          <button class="icon-btn" data-fav="${escapeHtml(e.id)}" aria-label="${a ? "Убрать из избранного" : "Добавить в избранное"}">\n            <span class="icon ${a ? "is-active" : ""}">⭐</span>\n          </button>\n        </div>\n      </div>\n    </article>\n  `
}
function syncFavIcons(e) {
    $$("[data-fav]").forEach(t => {
        const a = t.getAttribute("data-fav")
          , n = e.includes(a)
          , s = t.querySelector(".icon");
        s && s.classList.toggle("is-active", n),
        t.setAttribute("aria-label", n ? "Убрать из избранного" : "Добавить в избранное")
    }
    )
}
function updateFavCount() {
    const e = $("#favCount");
    e && (e.textContent = String(getFavs().length))
}
function bindGlobalModalButtons() {
    document.addEventListener("click", e => {
        const t = e.target.closest("[data-open-modal]")
          , a = e.target.closest("[data-close-modal]");
        if (t) {
            openModal(t.getAttribute("data-open-modal"))
        }
        a && closeModal()
    }
    )
}
function bindBurger() {
    const e = $("[data-burger]")
      , t = $("[data-mobile-nav]");
    e && t && (e.addEventListener("click", () => {
        const a = "true" === e.getAttribute("aria-expanded");
        e.setAttribute("aria-expanded", String(!a)),
        t.hidden = a
    }
    ),
    t.addEventListener("click", a => {
        a.target.closest("a,button") && (e.setAttribute("aria-expanded", "false"),
        t.hidden = !0)
    }
    ))
}
function bindDogCards(e) {
    e && (e.addEventListener("click", e => {
        const t = e.target.closest("[data-open-dog]")
          , a = e.target.closest("[data-fav]")
          , n = e.target.closest("[data-dog-id]");
        if (t) {
            const e = t.getAttribute("data-open-dog")
              , a = DOGS.find(t => t.id === e);
            return void (a && openModal("dog", a))
        }
        if (a) {
            const e = a.getAttribute("data-fav")
              , t = toggleFav(e);
            return updateFavCount(),
            syncFavIcons(t),
            void showToast(isFav(e) ? "Добавлено в избранное" : "Удалено из избранного")
        }
        if (n && !e.target.closest("button,a,input,select,textarea")) {
            const e = n.getAttribute("data-dog-id")
              , t = DOGS.find(t => t.id === e);
            t && openModal("dog", t)
        }
    }
    ),
    e.addEventListener("keydown", e => {
        if ("Enter" !== e.key)
            return;
        const t = e.target.closest("[data-dog-id]");
        if (!t)
            return;
        const a = t.getAttribute("data-dog-id")
          , n = DOGS.find(e => e.id === a);
        n && openModal("dog", n)
    }
    ))
}
function attachImageFallbacks(e) {
    if (!e)
        return;
    Array.from(e.querySelectorAll("img")).forEach(e => {
        e.__fallback_attached || (e.__fallback_attached = !0,
        e.addEventListener("error", () => {
            const t = e.closest("[data-dog-id]");
            let a = null;
            if (t) {
                const e = t.getAttribute("data-dog-id")
                  , n = DOGS.find(t => t.id === e);
                n && (a = n.name)
            }
            if (!a) {
                a = (e.getAttribute("alt") || "").replace(/^Фото\s*/i, "") || "собака"
            }
            const n = e.parentElement;
            n && (n.innerHTML = dogSvg(a))
        }
        ))
    }
    )
}
function initIndex() {
    const e = $("#featuredDogs");
    if (!e)
        return;
    const t = DOGS.filter(e => "available" === e.status).slice(0, 3);
    e.innerHTML = t.map( (e, t) => renderCardHtml(e, DOGS.findIndex(t => t.id === e.id))).join(""),
    bindDogCards(e),
    attachImageFallbacks(e)
}
function initDogs() {
    const e = $("#dogsGrid");
    if (!e)
        return;
    const t = $("#search")
      , a = $("#age")
      , n = $("#energy")
      , s = $("#sort")
      , l = $("#resetBtn")
      , i = $("#emptyState")
      , o = $("#clearSearchBtn")
      , r = $("#showFavoritesBtn");
    function d() {
        let l = [...DOGS];
        const o = (t?.value || "").trim().toLowerCase()
          , r = a?.value || "all"
          , d = n?.value || "all"
          , c = s?.value || "new";
        o && (l = l.filter(e => e.name.toLowerCase().includes(o) || e.breed.toLowerCase().includes(o) || e.short.toLowerCase().includes(o) || AGE_GROUP_LABEL[e.ageGroup].includes(o) || ENERGY_LABEL[e.energy].includes(o))),
        "all" !== r && (l = l.filter(e => e.ageGroup === r)),
        "all" !== d && (l = l.filter(e => e.energy === d)),
        "name" === c && l.sort( (e, t) => e.name.localeCompare(t.name, "ru")),
        "ageAsc" === c && l.sort( (e, t) => e.ageMonths - t.ageMonths),
        "ageDesc" === c && l.sort( (e, t) => t.ageMonths - e.ageMonths),
        e.innerHTML = l.map(e => renderCardHtml(e, DOGS.findIndex(t => t.id === e.id))).join(""),
        bindDogCards(e),
        attachImageFallbacks(e);
        const u = 0 === l.length;
        i && (i.hidden = !u)
    }
    function c() {
        t && (t.value = ""),
        a && (a.value = "all"),
        n && (n.value = "all"),
        s && (s.value = "new"),
        d(),
        showToast("Фильтры сброшены")
    }
    [t, a, n, s].forEach(e => {
        e && (e.addEventListener("input", d),
        e.addEventListener("change", d))
    }
    ),
    l && l.addEventListener("click", c),
    o && o.addEventListener("click", c),
    r && r.addEventListener("click", () => openModal("favorites")),
    d()
}
document.addEventListener("DOMContentLoaded", () => {
    setYear(),
    updateFavCount(),
    bindGlobalModalButtons(),
    bindBurger(),
    initIndex(),
    initDogs(),
    document.addEventListener("click", e => {
        e.target.closest("[data-close-modal]") && closeModal()
    }
    )
}
);
